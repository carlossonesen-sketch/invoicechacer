# --- Production checklist ---
# - NEXT_PUBLIC_*: inlined at BUILD time. Set in Vercel for Production; avoid NEXT_PUBLIC_DEV_TOOLS=1.
# - All other vars: RUNTIME. No secrets in NEXT_PUBLIC_*. CRON_SECRET required in prod for process-emails.

# Firebase Configuration
# Get these values from Firebase Console > Project Settings > Your apps
# See README.md for detailed instructions

# Dev only: Set to 1 for dev panels, nav debug, auth debug. For PRODUCTION use 0 or leave unset.
# NEXT_PUBLIC_* are inlined at build time; set per-environment in Vercel (Production should not have 1).
NEXT_PUBLIC_DEV_TOOLS=1

# Replace these with your actual Firebase project values
NEXT_PUBLIC_FIREBASE_API_KEY=YOUR_FIREBASE_API_KEY
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=your-project.firebaseapp.com
NEXT_PUBLIC_FIREBASE_PROJECT_ID=your-project-id
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=your-project.appspot.com
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=123456789012
NEXT_PUBLIC_FIREBASE_APP_ID=1:123456789012:web:abc123def456

# Firebase Admin SDK (for server-side token verification)
# Use scripts/service-account-to-env.ps1 to convert serviceAccountKey.json to this format
# See README.md for instructions
# This must be a single-line JSON string (no newlines between the braces)
# The private_key (REMOVED) field will have escaped newlines (\n) which are automatically handled
# 
# IMPORTANT: Replace the placeholder below with your actual service account JSON
# DO NOT commit real credentials to the repository

FIREBASE_SERVICE_ACCOUNT_KEY=<PASTE_SERVICE_ACCOUNT_JSON_HERE>

# Email Configuration (Production Test Mode)
# These settings control outbound invoice and chase email sending
# See src/lib/email/ for implementation details

# Kill switches: EMAIL_SENDING_ENABLED must be true for emails to send
# When false, emails are logged but not sent (safe for production testing)
EMAIL_SENDING_ENABLED=false

# DRY RUN mode: When true, logs email sends but does not deliver
# This is a global override that applies to all email types
EMAIL_DRY_RUN=false

# Auto-chase specific settings
AUTOCHASE_ENABLED=false
AUTOCHASE_DRY_RUN=true

# Rate limiting defaults
MAX_EMAILS_PER_DAY_PER_USER=25
MAX_EMAILS_PER_DAY_GLOBAL=200
EMAIL_COOLDOWN_MINUTES=60

# Developer override: Set to 0 to disable cooldown for testing (local dev only)
# Ignored in production (NODE_ENV=production). Only applies when NODE_ENV !== "production".
EMAIL_COOLDOWN_MINUTES_OVERRIDE=0

# Domain allowlist: Comma-separated list of allowed recipient domains
# If recipient domain is not in this list, email is redirected to TEST_REDIRECT_EMAIL
# Leave empty to allow all domains (backward compatibility)
ALLOWED_RECIPIENT_DOMAINS=gmail.com,yourdomain.com

# Test redirect: Email address to receive emails for non-allowlisted domains
# Original recipient is preserved in emailEvents.originalTo
TEST_REDIRECT_EMAIL=test-inbox@yourdomain.com

# Resend (real email provider)
# Get an API key at https://resend.com . When set, emails are sent via Resend.
# When unset, emails are logged only (no outbound send).
RESEND_API_KEY=

# From address for Resend. Use a verified domain in production (e.g. "Invoice Chaser <noreply@yourdomain.com>").
# For testing, Resend allows "onboarding@resend.dev" as default.
RESEND_FROM=

# --- Email provider (sendEmail; default: sesv2) ---
EMAIL_PROVIDER=sesv2

# AWS / SES (Sandbox or Prod). Replace placeholders with your IAM keys; do not commit real credentials.
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=REPLACE_ME
AWS_SECRET_ACCESS_KEY=REPLACE_ME
# AWS_SESSION_TOKEN=   # optional; only for temporary credentials

# Verified SES sender identity. Example: no-reply@invoicechaser.online (must be verified in AWS SES console).
EMAIL_FROM=no-reply@invoicechaser.online
# EMAIL_REPLY_TO=      # optional

# Dev-only route protection (optional)
DEV_TEST_TOKEN=dev123

# Cron: POST /api/invoices/process-emails (required in production)
# Set CRON_SECRET and send x-cron-secret or Authorization: Bearer <CRON_SECRET>.
# If unset in production, the endpoint returns 503. In development, unset allows local testing.
CRON_SECRET=

# Optional: Max invoices to process per process-emails run (default 50, max 100). Reduces load per run.
# PROCESS_EMAILS_BATCH_LIMIT=50

# Stripe (subscriptions and Customer Portal)
# Get keys from https://dashboard.stripe.com/apikeys ; webhook secret from Stripe CLI or Dashboard > Webhooks.
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=
# Price IDs (price_xxx) for each plan. Create Products/Prices in Stripe Dashboard.
STRIPE_PRICE_STARTER=
STRIPE_PRICE_PRO=
STRIPE_PRICE_BUSINESS=
# Base URL for Checkout/Portal return links (e.g. https://yourapp.vercel.app). Fallback: https://${VERCEL_URL}.
STRIPE_APP_URL=
